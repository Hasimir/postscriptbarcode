BASE_NAME = postscriptbarcode

SWIG_INTERFACE = ../$(BASE_NAME).i

SWIG_WRAP  = $(BASE_NAME)_wrap.c
SWIG_EXTRA = 

RUBY_MAKEFILE_IN  = extconf.rb
RUBY_MAKEFILE     = Makefile
RUBY_OUT = postscriptbarcode.so

cleanlist += $(SWIG_WRAP) $(SWIG_EXTRA) $(RUBY_MAKEFILE)

.PHONY: all swig-ruby install uninstall clean

all: swig-ruby

swig-ruby: $(RUBY_OUT)

$(RUBY_OUT): $(RUBY_MAKEFILE) $(SWIG_WRAP)
	make -f $<

$(RUBY_MAKEFILE): $(RUBY_MAKEFILE_IN)
	ruby $<

$(SWIG_WRAP) $(SWIG_EXTRA):
	swig -Wall -ruby -o $(SWIG_WRAP) -outdir . $(SWIG_INTERFACE)

install: $(RUBY_MAKEFILE) $(RUBY_OUT)
	make -f $< install

uninstall: $(RUBY_MAKEFILE)
	make -f $< uninstall

clean:
	-make -f $(RUBY_MAKEFILE) clean
	$(RM) $(cleanlist)

