BASE_NAME = postscriptbarcode

SWIG_INTERFACE = ../$(BASE_NAME).i

SWIG_WRAP  = $(BASE_NAME)_wrap.c
SWIG_EXTRA = $(BASE_NAME).py

PYTHON_MAKEFILE     = setup.py
PYTHON_OUT = _postscriptbarcode.so

cleanlist += $(SWIG_WRAP) $(SWIG_EXTRA) 

.PHONY: all swig-python install uninstall clean

all: swig-python

swig-python: $(PYTHON_OUT)

$(PYTHON_OUT): $(PYTHON_MAKEFILE) $(SWIG_WRAP)
	python $< build_ext

$(SWIG_WRAP) $(SWIG_EXTRA):
	swig -Wall -python -o $(SWIG_WRAP) -outdir . $(SWIG_INTERFACE)

install: $(PYTHON_MAKEFILE) $(PYTHON_OUT)
	python $< install

uninstall: $(PYTHON_MAKEFILE)
	python $< uninstall

clean:
	python $(PYTHON_MAKEFILE) clean --all
	$(RM) $(cleanlist)

